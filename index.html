<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’– Valentine's Proposal</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Quicksand', 'Comic Sans MS', cursive, sans-serif;
        }
        
        .font-pacifico {
            font-family: 'Pacifico', cursive;
        }
        
        /* Floating hearts animation */
        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .floating-heart {
            animation: float linear infinite;
        }
        
        /* Pulse animation */
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        .pulse-animation {
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        /* Bounce animation */
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }
        
        .bounce-animation {
            animation: bounce 2s ease-in-out infinite;
        }
        
        /* Confetti animation */
        @keyframes confetti {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        .confetti {
            animation: confetti linear;
        }
        
        /* Shake animation */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            75% { transform: translateX(10px) rotate(5deg); }
        }
        
        .shake-animation {
            animation: shake 0.5s ease-in-out;
        }
        
        /* Gradient text */
        .gradient-text {
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Button hover effects */
        .button-hover {
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .button-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255, 107, 157, 0.4);
        }
        
        .yes-button:hover {
            animation: pulse 0.6s infinite;
        }
        
        /* Input field */
        .input-field {
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.3);
        }
        
        /* Background gradient */
        .bg-valentine {
            background: linear-gradient(135deg, #ffeef8 0%, #fff5f7 25%, #ffe8f5 50%, #fff0f9 75%, #ffe5f4 100%);
        }
    </style>
</head>
<body class="bg-valentine min-h-screen overflow-hidden relative">
    
<audio id="bgMusic" loop preload="auto" muted>
    <source src="./romantic-piano-431010.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>

    <!-- Floating Hearts Background -->
    <div id="floatingHearts" class="fixed inset-0 pointer-events-none"></div>
    
    <!-- Main Container -->
    <div class="relative z-10 flex justify-center items-center min-h-screen p-5">
        
        <!-- PAGE 1: Name Input & Link Generator -->
        <div id="page1" class="bg-white/95 backdrop-blur-lg rounded-3xl p-16 max-w-xl w-full shadow-2xl text-center border-4 border-pink-200/30">
            <div class="text-6xl mb-5 bounce-animation">ğŸ’Œ</div>
            
            <h1 class="text-5xl mb-3 font-pacifico text-pink-600">
                Create Your Valentine Surprise
            </h1>
            
            <p class="text-xl text-gray-600 mb-10 font-semibold">
                Make someone's day extra special âœ¨
            </p>
            
            <input 
                type="text" 
                id="nameInput" 
                placeholder="Enter their name... ğŸ’–"
                class="input-field w-full p-5 text-lg rounded-2xl border-2 border-pink-300 outline-none mb-5 font-semibold text-pink-600"
            />
            
            <button 
                id="generateBtn"
                class="button-hover w-full p-5 text-xl font-bold bg-gradient-to-r from-pink-400 to-pink-600 text-white rounded-2xl cursor-pointer"
            >
                Generate Valentine Link ğŸ’–
            </button>
            
            <!-- Generated Link Section -->
            <div id="linkSection" class="hidden mt-8 p-5 bg-gradient-to-r from-pink-50 to-pink-100 rounded-2xl border-2 border-dashed border-pink-400">
                <p class="text-sm text-gray-600 mb-3 font-semibold">
                    ğŸ‰ Your special link is ready!
                </p>
                
                <div id="generatedLink" class="bg-white p-3 rounded-xl mb-3 break-all text-sm text-pink-600 font-semibold">
                </div>
                
                <button 
                    id="copyBtn"
                    class="button-hover px-6 py-3 bg-pink-400 text-white rounded-xl cursor-pointer font-semibold text-base mx-auto flex items-center gap-2"
                >
                    <span id="copyIcon">ğŸ“‹</span> <span id="copyText">Copy Link</span>
                </button>
            </div>
        </div>
        
        <!-- PAGE 2: Valentine Question -->
        <div id="page2" class="hidden bg-white/95 backdrop-blur-lg rounded-3xl p-16 max-w-2xl w-full shadow-2xl text-center border-4 border-pink-200/30 relative">
            <div class="text-8xl mb-8 pulse-animation">ğŸ’–</div>
            
            <h1 class="text-5xl mb-5 font-pacifico text-pink-600 leading-tight">
                Hey <span id="userName"></span> ğŸ¥ºğŸ’–
            </h1>
            
            <p class="text-3xl text-gray-600 mb-12 font-semibold">
                Will you be my Valentine?
            </p>
            
            <!-- Funny Message Popup -->
            <div id="funnyMessage" class="hidden absolute -top-16 left-1/2 transform -translate-x-1/2 bg-pink-400 text-white px-6 py-4 rounded-2xl text-lg font-semibold shadow-lg whitespace-nowrap shake-animation">
            </div>
            
            <div class="flex gap-5 justify-center flex-wrap relative min-h-20">
                <!-- YES Button -->
                <button 
                    id="yesBtn"
                    class="button-hover yes-button px-16 py-5 text-2xl font-bold bg-gradient-to-r from-green-500 to-green-600 text-white rounded-2xl cursor-pointer"
                >
                    YES ğŸ’˜
                </button>
                
                <!-- NO Button - The Escaper -->
                <button 
                    id="noBtn"
                    class="button-hover px-16 py-5 text-2xl font-bold bg-gradient-to-r from-pink-400 to-pink-600 text-white rounded-2xl cursor-pointer absolute"
                    style="transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);"
                >
                    NO ğŸ™„
                </button>
            </div>
            
            <div class="mt-10 flex justify-center gap-3 text-4xl">
                <span class="pulse-animation">âœ¨</span>
                <span class="pulse-animation" style="animation-delay: 0.2s;">â¤ï¸</span>
                <span class="pulse-animation" style="animation-delay: 0.4s;">âœ¨</span>
            </div>
        </div>
        
        <!-- PAGE 3: Celebration -->
        <div id="page3" class="hidden bg-white/95 backdrop-blur-lg rounded-3xl p-20 max-w-2xl w-full shadow-2xl text-center border-4 border-pink-200/30 pulse-animation">
            <div class="text-9xl mb-8">ğŸ‰ğŸ’–ğŸŠ</div>
            
            <h1 class="text-6xl mb-5 font-pacifico text-pink-600">
                Yayyy!!
            </h1>
            
            <p class="text-4xl text-gray-600 mb-8 font-semibold leading-relaxed">
                ğŸ’ƒğŸ•º
            </p>
            
            <p class="text-3xl text-pink-400 font-bold">
                You just made someone very happy â¤ï¸
            </p>
            
            <div class="mt-12 text-5xl flex justify-center gap-4">
                <span class="bounce-animation" style="animation-delay: 0s;">â¤ï¸</span>
                <span class="bounce-animation" style="animation-delay: 0.2s;">ğŸ’•</span>
                <span class="bounce-animation" style="animation-delay: 0.4s;">ğŸ’–</span>
                <span class="bounce-animation" style="animation-delay: 0.6s;">ğŸ’—</span>
            </div>
        </div>
    </div>
    
    <!-- Confetti Container -->
    <div id="confettiContainer" class="fixed inset-0 pointer-events-none z-50"></div>

    <script>
        // State management
        let dodgeCount = 0;
        let noButtonPos = { x: 0, y: 0 };
        
        // Messages that get funnier each time
        const funnyMessages = [
            "Hey! Why you running? ğŸ˜­",
            "You can't say nooo ğŸ˜‚",
            "Come on, just say yes! ğŸ¥º",
            "The NO button is broken! ğŸ’”",
            "It's destiny, stop fighting it! âœ¨",
            "I see what you're doing... ğŸ‘€",
            "YES is the only option here ğŸ˜Œ",
            "This is getting ridiculous ğŸ¤£",
            "Just give up and click YES! ğŸ’–"
        ];
        
        // Generate floating hearts on page load
        function createFloatingHearts() {
            const container = document.getElementById('floatingHearts');
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart absolute text-4xl opacity-30';
                heart.innerHTML = 'â¤ï¸';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.bottom = '-50px';
                heart.style.animationDuration = (8 + Math.random() * 4) + 's';
                heart.style.animationDelay = Math.random() * 5 + 's';
                heart.style.fontSize = (20 + Math.random() * 30) + 'px';
                container.appendChild(heart);
            }
        }
        
        // Check URL for name parameter on load
        function checkURLForName() {
            const urlParams = new URLSearchParams(window.location.search);
            const urlName = urlParams.get('name');
            if (urlName) {
                document.getElementById('userName').textContent = decodeURIComponent(urlName);
                showPage('page2');
            }
        }
        
        // Show specific page
        function showPage(pageId) {
            document.getElementById('page1').classList.add('hidden');
            document.getElementById('page2').classList.add('hidden');
            document.getElementById('page3').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }
        
        // Generate link
        document.getElementById('generateBtn').addEventListener('click', function() {
            const name = document.getElementById('nameInput').value.trim();
            if (!name) return;
            
            const encodedName = encodeURIComponent(name);
            const link = `${window.location.origin}${window.location.pathname}?name=${encodedName}`;
            
            document.getElementById('generatedLink').textContent = link;
            document.getElementById('linkSection').classList.remove('hidden');
        });
        
        // Enter key support for name input
        document.getElementById('nameInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('generateBtn').click();
            }
        });
        
        // Copy to clipboard
        document.getElementById('copyBtn').addEventListener('click', function() {
            const link = document.getElementById('generatedLink').textContent;
            navigator.clipboard.writeText(link);
            
            document.getElementById('copyIcon').textContent = 'âœ…';
            document.getElementById('copyText').textContent = 'Copied!';
            this.classList.remove('bg-pink-400');
            this.classList.add('bg-green-500');
            
            setTimeout(() => {
                document.getElementById('copyIcon').textContent = 'ğŸ“‹';
                document.getElementById('copyText').textContent = 'Copy Link';
                this.classList.remove('bg-green-500');
                this.classList.add('bg-pink-400');
            }, 2000);
        });
        
        // Move NO button away
        function moveNoButton() {
            dodgeCount++;
            
            // Show funny message
            const messageDiv = document.getElementById('funnyMessage');
            const messageIndex = Math.min(dodgeCount - 1, funnyMessages.length - 1);
            messageDiv.textContent = funnyMessages[messageIndex];
            messageDiv.classList.remove('hidden');
            
            // Remove shake animation and re-add it
            messageDiv.classList.remove('shake-animation');
            void messageDiv.offsetWidth; // Trigger reflow
            messageDiv.classList.add('shake-animation');
            
            setTimeout(() => {
                messageDiv.classList.add('hidden');
            }, 2000);
            
            // Calculate new position with increasing chaos
            const speedMultiplier = 1 + (dodgeCount * 0.3);
            const maxMove = Math.min(200, 80 + (dodgeCount * 15));
            
            const randomX = (Math.random() - 0.5) * maxMove * speedMultiplier;
            const randomY = (Math.random() - 0.5) * maxMove * speedMultiplier;
            
            noButtonPos = { x: randomX, y: randomY };
            
            const noBtn = document.getElementById('noBtn');
            noBtn.style.transform = `translate(${randomX}px, ${randomY}px)`;
            
            // Make it faster each time
            const speed = Math.max(0.1, 0.3 - (dodgeCount * 0.02));
            noBtn.style.transition = `transform ${speed}s cubic-bezier(0.68, -0.55, 0.265, 1.55)`;
        }
        
        // NO button events
        document.getElementById('noBtn').addEventListener('mouseenter', moveNoButton);
        document.getElementById('noBtn').addEventListener('click', moveNoButton);
        
        // YES button - Show celebration
        document.getElementById('yesBtn').addEventListener('click', function() {
            createConfetti();
            showPage('page3');
        });
        
        // Create confetti
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            const emojis = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’“', 'ğŸ’', 'ğŸ‰', 'âœ¨', 'ğŸŒŸ'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti fixed text-4xl';
                confetti.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-50px';
                confetti.style.animationDuration = (2 + Math.random() * 2) + 's';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                container.appendChild(confetti);
                
                // Remove after animation
                setTimeout(() => {
                    confetti.remove();
                }, 4000);
            }
        }
        
        // Initialize on page load
        window.addEventListener('load', function() {
            createFloatingHearts();
            checkURLForName();

            // Start music (muted by default)
            const music = document.getElementById('bgMusic');
            music.volume = 0.25;           // gentle volume
            music.play().catch(() => {
                // Autoplay blocked â†’ wait for user interaction
                document.body.addEventListener('click', () => {
                    music.muted = false;
                    music.play();
                }, { once: true });
            });
        });
    </script>
</body>
</html>
